<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Joe & The Juice - Betaling</title>
    <link rel="stylesheet" href="../css/payment.css"> <!-- Link til din CSS-fil -->
</head>
<body>

    <div class="background-overlay"></div>

    <div class="payment-box">
        <h1>Betaling</h1>
        <!-- Logo -->
        <img src="../IMG/joe-and-the-juice-logo.png" alt="Joe & The Juice Logo" class="logo">
        <p>Udfyld dine oplysninger for at betale.</p>

        <div class="product-placeholder">
            <strong>PRODUKTER I KURVEN</strong>
            <p>Produkter kommer...</p> <!-- Dynamisk tekst senere -->
        </div>

        <!-- Input felter -->
        <form>
            <div class="form-group">
                <label for="name">Fulde navn</label>
                <input type="text" id="name" placeholder="Indtast dit navn" required>
            </div>
            <div class="form-group">
                <label for="card">Kortnummer</label>
                <input type="text" id="card" placeholder="1234 5678 9012 3456" required>
            </div>
            <div class="form-group">
                <label for="expiry">Udløbsdato</label>
                <input type="text" id="expiry" placeholder="MM/YY" required>
            </div>
            <div class="form-group">
                <label for="cvc">CVC</label>
                <input type="text" id="cvc" placeholder="123" required>
            </div>

            <!-- Betal knap -->
            <button type="button" class="pay-btn" id="payButton">Betal nu</button>
        </form>
    </div>

    <script>
        document.getElementById('payButton').addEventListener('click', async () => {
            try {
                // Send POST-forespørgsel til din server for at oprette en Checkout-session
                const response = await fetch('http://localhost:4242/create-checkout-session', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                });
                const session = await response.json();

                // Redirect til Stripe Checkout
                if (session.url) {
                    window.location.href = session.url;
                }
            } catch (error) {
                console.error('Fejl i betalingsflowet:', error);
            }
        });
    </script>
</body>
</html>
